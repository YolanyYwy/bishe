# 示例数据说明

本文档说明如何准备数据文件以供Agent使用。

## 数据格式要求

### 支持的文件格式

- CSV (.csv)
- Excel (.xlsx, .xls)

### 数据结构

数据应该是表格形式，包含：
- **特征列**: 影响研磨速度的各种参数
- **目标列**: 研磨速度（通常放在最后一列）

## 示例数据格式

### CSV格式示例

```csv
温度,压力,转速,材料硬度,磨料粒度,研磨速度
150,50,1000,65,80,45.2
160,55,1100,68,85,48.5
155,52,1050,66,82,46.8
165,58,1150,70,88,51.2
```

### Excel格式示例

| 温度 | 压力 | 转速 | 材料硬度 | 磨料粒度 | 研磨速度 |
|------|------|------|----------|----------|----------|
| 150  | 50   | 1000 | 65       | 80       | 45.2     |
| 160  | 55   | 1100 | 68       | 85       | 48.5     |
| 155  | 52   | 1050 | 66       | 82       | 46.8     |
| 165  | 58   | 1150 | 70       | 88       | 51.2     |

## 数据准备建议

### 1. 数据量建议

- **最少**: 100条记录
- **推荐**: 500-1000条记录
- **理想**: 1000+条记录

数据量越大，模型性能通常越好。

### 2. 特征选择

选择与研磨速度相关的特征，例如：

**工艺参数**:
- 温度
- 压力
- 转速
- 进给速度
- 加工时间

**材料参数**:
- 材料硬度
- 材料密度
- 材料类型编码

**设备参数**:
- 磨料粒度
- 磨具类型
- 设备功率
- 冷却液流量

**环境参数**:
- 环境温度
- 湿度

### 3. 数据质量要求

#### 完整性
- 尽量减少缺失值
- 如有缺失，Agent会自动处理（均值填充或删除）

#### 准确性
- 确保数据测量准确
- 剔除明显错误的数据

#### 一致性
- 单位统一（如温度都用摄氏度）
- 格式统一（如日期格式）

### 4. 数据预处理提示

在使用Agent之前，你可以：

1. **检查数据类型**: 确保数值列是数字格式
2. **处理分类变量**: 如果有文字类别，需要转换为数字编码
3. **检查异常值**: 查看是否有不合理的极端值
4. **数据标准化**: Agent会自动处理，但你也可以预先标准化

## 示例数据模板

### 训练数据模板 (train_data.csv)

```csv
特征1,特征2,特征3,特征4,特征5,研磨速度
10.5,20.3,15.7,8.2,12.1,50.2
12.1,18.9,16.2,7.8,13.5,48.5
11.3,21.5,14.9,8.5,11.8,52.1
13.2,19.7,15.3,7.5,14.2,47.8
10.8,22.1,16.5,8.8,12.7,51.5
```

### 预测数据模板 (predict_data.csv)

预测数据不需要包含目标列（研磨速度）：

```csv
特征1,特征2,特征3,特征4,特征5
11.0,20.5,15.5,8.0,12.5
12.5,19.0,16.0,7.7,13.8
10.9,21.8,15.1,8.3,12.0
```

## 数据放置位置

建议将数据文件放在以下位置：

```
grinding_speed_agent/
├── data/
│   ├── train_data.csv          # 训练数据
│   ├── predict_data.csv        # 预测数据
│   └── test_data.csv           # 测试数据
```

## 使用示例

### 在UI中使用

1. 启动Streamlit UI
2. 选择"数据分析"或"模型训练"模式
3. 点击"上传数据文件"
4. 选择你的CSV或Excel文件

### 在命令行中使用

```bash
# 训练
python main.py --mode train --data data/train_data.csv

# 预测
python main.py --mode predict --data data/predict_data.csv
```

## 数据转换工具

如果你的数据格式不符合要求，可以使用以下Python代码转换：

```python
import pandas as pd

# 读取数据
df = pd.read_excel('your_data.xlsx')

# 重命名列（如果需要）
df.rename(columns={'old_name': 'new_name'}, inplace=True)

# 选择需要的列
df = df[['特征1', '特征2', '特征3', '研磨速度']]

# 处理缺失值
df = df.dropna()  # 或 df.fillna(df.mean())

# 保存为CSV
df.to_csv('processed_data.csv', index=False)
```

## 数据安全

- Agent只在本地处理数据，不会上传到任何服务器
- 所有数据和模型都保存在本地
- 可以安全处理敏感的生产数据

## 获取帮助

如果对数据格式有疑问：
1. 查看 `data/` 目录中的示例数据
2. 在UI的"数据分析"模式中查看数据预览
3. 查看错误提示信息
4. 提交Issue并附上数据样本（脱敏后）

---

准备好数据后，请查看 [README.md](README.md) 开始使用Agent。
